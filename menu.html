<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Menu | √âclat Bistro</title>
    <meta name="description" content="Explore our complete menu featuring starters, main courses, desserts, and drinks at √âclat Bistro">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/animation.css">
</head>
<body>
    <!-- Page Loader -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="loader-ring"></div>
            <p class="loader-text">√âclat Bistro</p>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="container">
            <a href="/" class="logo" aria-label="√âclat Bistro Home">
                <span class="logo-icon">E</span>
                <span class="logo-text">√âclat Bistro</span>
            </a>
            
            <div class="nav-menu" id="navMenu">
                <a href="/" class="nav-link">Home</a>
                <div class="nav-dropdown">
                    <a href="/menu" class="nav-link dropdown-toggle active">Menu</a>
                    <div class="dropdown-menu">
                        <a href="/menu#starters">Starters</a>
                        <a href="/menu#mains">Main Courses</a>
                        <a href="/menu#desserts">Desserts</a>
                        <a href="/menu#drinks">Drinks</a>
                    </div>
                </div>
                <a href="/#reservation" class="nav-link">Reservations</a>
                <a href="/#gallery" class="nav-link">Gallery</a>
                <a href="/#about" class="nav-link">About Us</a>
                <a href="/#contact" class="nav-link">Contact</a>
                <a href="/dashboard.html" class="nav-link">Dashboard</a>
            </div>
            
            <div class="nav-actions">
                <a href="/order" class="btn btn-primary">
                    <i class="fas fa-shopping-bag"></i> Order Online
                </a>
            </div>
            
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle mobile menu" aria-expanded="false">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </nav>

    <!-- Menu Page Section -->
    <section class="menu-page-section" id="menu">
        <div class="menu-page-container">
            <!-- Menu Header -->
            <div class="menu-page-header">
                <span class="section-label">Culinary Artistry</span>
                <h1>Our Full Menu</h1>
                <p class="section-description">Discover our exquisite selection of dishes, crafted with the finest seasonal ingredients and presented with artistic flair.</p>
            </div>
            
            <!-- Category Filter -->
            <div class="menu-categories">
                <button class="category-btn active" data-category="all">All</button>
                <button class="category-btn" data-category="starters">Starters</button>
                <button class="category-btn" data-category="mains">Main Courses</button>
                <button class="category-btn" data-category="desserts">Desserts</button>
                <button class="category-btn" data-category="drinks">Drinks</button>
            </div>
            
            <!-- Menu Items Container -->
            <div class="menu-grid" id="menuGrid">
                <div class="menu-loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <!-- Brand & Info -->
                <div class="footer-col">
                    <h3>√âclat Bistro</h3>
                    <p>Experience the perfect blend of tradition and modern innovation in every dish we serve.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>

                <!-- Contact -->
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <p>123 Gourmet Avenue<br>Culinary District, NY 10001</p>
                    <p>+1 (555) 123-4567</p>
                    <p>hello@eclatbistro.com</p>
                </div>

                <!-- Hours -->
                <div class="footer-col">
                    <h3>Opening Hours</h3>
                    <p>Mon - Thu: 11am - 10pm</p>
                    <p>Fri - Sat: 11am - 11pm</p>
                    <p>Sun: 10am - 9pm</p>
                </div>

                <!-- Newsletter -->
                <div class="footer-col">
                    <h3>Newsletter</h3>
                    <p>Subscribe for exclusive offers.</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Your email address" required style="margin-bottom: 0.5rem;">
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Subscribe</button>
                    </form>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 √âclat Bistro. All rights reserved.</p>
                <div class="payments" style="margin-top: 1rem;">
                    <i class="fab fa-cc-visa fa-lg" style="margin-right: 10px;"></i>
                    <i class="fab fa-cc-mastercard fa-lg" style="margin-right: 10px;"></i>
                    <i class="fab fa-cc-amex fa-lg"></i>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Cart Notification -->
    <div id="cartNotification" class="cart-notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Added to cart</span>
    </div>
    
    <!-- JavaScript -->
    <script src="javascript/main.js"></script>
    <script>
        // ========== MENU PAGE JAVASCRIPT ==========
        
        let menuItems = [];
        let cart = [];
        
        // DOM Ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Menu Page - Loaded');
            
            initNavigation();
            initMobileMenu();
            initCurrentYear();
            initDropdown();
            initMenu();
            initCart();
            initCategoryFilter();
            initPageLoader();
        });
        
        // Initialize Menu
        async function initMenu() {
            try {
                const response = await fetch('/api/menu');
                if (!response.ok) throw new Error('Failed to fetch menu');
                
                menuItems = await response.json();
                renderMenu(menuItems);
            } catch (error) {
                console.error('Error loading menu:', error);
                document.getElementById('menuGrid').innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1; text-align: center; padding: 60px;">
                        <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: #d72638; margin-bottom: 20px;"></i>
                        <h3>Unable to load menu</h3>
                        <p>Please try again later.</p>
                    </div>
                `;
            }
        }
        
        // Render Menu
        function renderMenu(items) {
            const grid = document.getElementById('menuGrid');
            if (!grid) return;
            
            grid.innerHTML = items.map(item => `
                <div class="menu-item" data-category="${item.category}" data-id="${item.id}">
                    <div class="menu-item-image">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                        ${item.badge ? `<span class="menu-badge">${item.badge}</span>` : ''}
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-header">
                            <h3>${item.name}</h3>
                            <span class="menu-price">$${item.price.toFixed(2)}</span>
                        </div>
                        <p class="menu-description">${item.description}</p>
                        <div class="menu-tags">
                            <span class="tag">${item.category.charAt(0).toUpperCase() + item.category.slice(1)}</span>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 16px;" onclick="addToCart(${item.id})">
                            <i class="fas fa-plus"></i> Add to Cart
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Initialize Cart
        function initCart() {
            const savedCart = localStorage.getItem('eclatCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        }
        
        // Add to Cart
        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            if (!item) return;
            
            const existingItem = cart.find(i => i.id === itemId);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    image: item.image,
                    quantity: 1
                });
            }
            
            saveCart();
            showNotification(`Added ${item.name} to cart`, 'success');
        }
        
        // Save Cart
        function saveCart() {
            localStorage.setItem('eclatCart', JSON.stringify(cart));
        }
        
        // Show Notification
        function showNotification(message, type) {
            const notification = document.getElementById('cartNotification');
            const text = document.getElementById('notificationText');
            
            if (notification && text) {
                text.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        // Initialize Category Filter
        function initCategoryFilter() {
            const categoryButtons = document.querySelectorAll('.category-btn');
            const menuItemsEls = document.querySelectorAll('.menu-item');
            
            if (categoryButtons.length === 0) return;
            
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    menuItemsEls.forEach(item => {
                        const itemCategory = item.getAttribute('data-category');
                        
                        if (category === 'all' || itemCategory === category) {
                            item.style.display = 'flex';
                            item.style.opacity = '1';
                            item.style.transform = 'translateY(0)';
                        } else {
                            item.style.opacity = '0';
                            item.style.transform = 'translateY(20px)';
                            setTimeout(() => {
                                if (item.style.opacity === '0') {
                                    item.style.display = 'none';
                                }
                            }, 300);
                        }
                    });
                });
            });
        }
        
        // Page Loader
        function initPageLoader() {
            window.addEventListener('load', function() {
                setTimeout(function() {
                    const pageLoader = document.getElementById('pageLoader');
                    if (pageLoader) {
                        pageLoader.classList.add('hidden');
                    }
                }, 500);
            });
        }
    </script>
    
    <!-- Vercel Speed Insights -->
    <script>
        window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>
